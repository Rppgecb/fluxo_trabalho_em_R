---
title: "Fluxo de Trabalho ReprodutÃ­vel com Dados EcolÃ³gicos em R"
subtitle: "Dia 01 â€” Teoria"
author: "Diogo S. B. Rocha, Hernani Ramos"
date: 01/08/2025
format:
  revealjs:
    theme: simple
    slide-number: true
    width: 1280
    height: 720
    preview-links: auto
    css: styles.css
editor: visual
---

## Bem-vindos!

### Estrutura da disciplina

::: incremental
-   MÃ³dulo 1 â€“ Fundamentos de ciÃªncia aberta e organizaÃ§Ã£o de projetos
-   MÃ³dulo 2 â€“ Versionamento de cÃ³digo (Git/GitHub)
-   MÃ³dulo 3 â€“ ManipulaÃ§Ã£o e limpeza de dados (tidyverse + importaÃ§Ã£o)
-   MÃ³dulo 4 â€“ VisualizaÃ§Ã£o e anÃ¡lise exploratÃ³ria (ggplot2, tabelas)
-   MÃ³dulo 5 â€“ RelatÃ³rios reprodutÃ­veis (RMarkdown)
-   MÃ³dulo 6 (extra) â€“ Dados espaciais (terra, sf)
-   MÃ³dulo 7 â€“ Projeto final integrador (repo + relatÃ³rio)
:::

------------------------------------------------------------------------

### Objetivos do Dia 1

-   Entender os fundamentos da ciÃªncia aberta e reprodutibilidade.
-   Aprender a estruturar projetos organizados e reprodutÃ­veis no R.
-   Compreender o papel de ferramentas como RStudio Projects, Git e GitHub.

------------------------------------------------------------------------

## A realidade de muitos projetos...

::::: columns
::: column
\
\
\
\

<blockquote>â€œNa minha mÃ¡quina funcionaâ€ nÃ£o Ã© ciÃªncia reprodutÃ­vel.</blockquote>
:::

::: column
![](images/documents_2x.png){width="70%"}
:::
:::::

------------------------------------------------------------------------

## A Crise da Reprodutibilidade

-   +50% dos cientistas jÃ¡ tentaram (e falharam) reproduzir estudos publicados.
-   Dados e cÃ³digo indisponÃ­veis = ciÃªncia opaca.
-   Ecologia lida com dados complexos e modelos nÃ£o triviais.

**ğŸ§­ CiÃªncia aberta + boas prÃ¡ticas = mais confianÃ§a, mais impacto.**

------------------------------------------------------------------------

## CiÃªncia Aberta

-   **PropÃ³sito:** tornar o conhecimento cientÃ­fico *acessÃ­vel e reutilizÃ¡vel*\
-   **Como:** abrir **dados, cÃ³digo e publicaÃ§Ãµes**\
-   **Quem participa:** cientistas **e nÃ£o-cientistas**
-   **Salvaguardas:** Ã©tica, privacidade e proteÃ§Ã£o quando â€œtÃ£o aberto quanto possÃ­vel, **tÃ£o fechado quanto necessÃ¡rio**â€.

::: {style="font-size:0.85em; line-height:1.25"}
> CiÃªncia Aberta: criaÃ§Ã£o, disseminaÃ§Ã£o e democratizaÃ§Ã£o do conhecimentoâ€ (CiÃªncia & Cultura, v.77, n.1, 2025)
:::

------------------------------------------------------------------------

## FAIR â€” o que Ã© e como aplicar

**PrincÃ­pios:**

\- **F**indable (EncontrÃ¡vel)

\- **A**ccessible (AcessÃ­vel)

\- **I**nteroperable (InteroperÃ¡vel)

\- **R**eusable (ReusÃ¡vel)

**Checklist prÃ¡tico:**

\- README claro e dicionÃ¡rio de dados.

-   Formatos abertos (CSV UTF-8, .tif, .gpkg).

------------------------------------------------------------------------

## Onde a ciÃªncia aberta acontece

**Ferramentas prÃ¡ticas:**

-   Dados: [MapBiomas](https://mapbiomas.org), [GBIF](https://www.gbif.org)
-   CÃ³digo: [GitHub](https://github.com)
-   Arquivamento: [Zenodo](https://zenodo.org)
-   PublicaÃ§Ã£o: [Scientific Data](https://www.nature.com/sdata/)

------------------------------------------------------------------------

## Da coleta Ã  comunicaÃ§Ã£o: um fluxo reprodutÃ­vel

```{mermaid}
%%{init: {'themeVariables': {'fontSize': '34px'}, 'flowchart': {'nodeSpacing': 42, 'rankSpacing': 42}}}%%

flowchart TB
  A["Coleta de Dados"] --> B["ImportaÃ§Ã£o"]
  B --> C["Limpeza"]
  C --> D["AnÃ¡lise"]
  D --> E["VisualizaÃ§Ã£o"]
  E --> F["RelatÃ³rio (Quarto/Rmd) + GitHub"]
  
  classDef step fill:#e8f1ff,stroke:#6b8fd6,rx:10,ry:10;
  class A,B,C,D,E,F step;
```

------------------------------------------------------------------------

## Reprodutibilidade vs. Replicabilidade

| Termo | DefiniÃ§Ã£o rÃ¡pida |
|----|----|
| **Reprodutibilidade** | Outros obtÃªm os mesmos resultados com seu cÃ³digo. |
| **Replicabilidade** | Outros obtÃªm resultados semelhantes com nova coleta. |

**Exemplo prÃ¡tico:** seu artigo com cÃ³digo e dados = reprodutÃ­vel.

------------------------------------------------------------------------

## Por que se preocupar com organizaÃ§Ã£o no R?

ğŸ¯ Projetos desorganizados atrasam, confundem e te prejudicam.

-   Reprodutibilidade exige organizaÃ§Ã£o **desde o inÃ­cio**.

-   Projetos de ecologia geram muitos arquivos: tabelas, shapefiles, rasters, scripts.

-   CÃ³digo mal estruturado dificulta reuso, reaplicaÃ§Ã£o e publicaÃ§Ã£o.

-   Arquivos com caminhos absolutos (`C:/meu_pc/desktop/`) nÃ£o funcionam em outros computadores.

> Scripts nÃ£o organizados = dor de cabeÃ§a futura.\
> Pastas bagunÃ§adas = retrabalho.

------------------------------------------------------------------------

## Exemplo prÃ¡tico: Ecologia

-   Modelos de distribuiÃ§Ã£o de espÃ©cies
-   AnÃ¡lises de mudanÃ§a no uso da terra
-   AvaliaÃ§Ã£o de biodiversidade em paisagens fragmentadas

ğŸ¯ Reprodutibilidade permite que outros testem seu modelo, ou usem seus dados em novos contextos.

------------------------------------------------------------------------

## Como **NÃƒO** organizar seu projeto

\

``` bash
[meuprojeto_2022b]
â”œâ”€â”€ resultado final.csv
â”œâ”€â”€ relatorio_final_versao_final_ultima.Rmd
â”œâ”€â”€ script1.R
â”œâ”€â”€ script2_teste.R
â”œâ”€â”€ backup_old/
â”œâ”€â”€ shapefile novo/
```

\
\

> â€œVocÃª jÃ¡ viu (ou fez) algo parecido?â€

------------------------------------------------------------------------

## Estrutura de Projetos

::::: columns
::: column
-   Um projeto â‰  um script solto.
-   Use `RStudio Projects` para isolar e organizar.
-   Use caminhos relativos.
-   Evite `setwd()` e nunca use caminhos absolutos.
:::

::: {.column .fragment}
**Estrutura tÃ­pica:**

``` bash
[meu_projeto]
â”œâ”€â”€â”€data/
â”‚   â”œâ”€â”€â”€csv/
â”‚   â”‚   â”œâ”€â”€â”€clean/
â”‚   â”‚   â””â”€â”€â”€raw/
â”‚   â”œâ”€â”€â”€raster/
â”‚   â””â”€â”€â”€shape/
â”œâ”€â”€â”€output/
â”œâ”€â”€â”€scripts/
â”‚   â”œâ”€â”€â”€01_data_cleaning.R
â”‚   â””â”€â”€â”€02_linear_regression.R
â”œâ”€â”€â”€report.Rmd
â””â”€â”€â”€project.Rproj
```
:::
:::::

------------------------------------------------------------------------

## Como vocÃª organiza seus projetos?

-   Pastas com nomes padronizados?
-   Usa sempre o mesmo script para tudo?
-   JÃ¡ usou `.Rproj`?

ğŸ¯ Vamos ver como padronizar e melhorar isso agora.

------------------------------------------------------------------------

## Caminhos relativos?

âŒ `read.csv("C:/meus_dados/dataset.csv")`\
âœ… `read_csv("dados/dataset.csv")`

-   Nunca use caminhos absolutos;

-   Manter estrutura estÃ¡vel de pastas.

-   Caminhos relativos garantem que o projeto funcione em qualquer mÃ¡quina.

-   

    ## Baseado no diretÃ³rio raiz do `.Rproj`.

## Congele o ambiente com `renv`

-   VersÃµes de pacotes importam para reprodutibilidade.

-   **Fluxo**: `renv::init()` â†’ `renv::snapshot()` â†’ `renv::restore()` em outra mÃ¡quina.

-   Garante que todos usem **as mesmas versÃµes** de pacotes.

-   **Documente o ambiente** no relatÃ³rio (apÃªndice): `sessionInfo()`.

------------------------------------------------------------------------

## Seeds & reprodutibilidade

-   Modelos/amostragens estocÃ¡sticas precisam de seed.

-   Defina sempre `set.seed(123)` antes de rodar anÃ¡lises aleatÃ³rias.

-   Registre o seed no relatÃ³rio para permitir a reproduÃ§Ã£o exata.

-   Se usar mÃºltiplas rotinas, padronize a fonte de aleatoriedade.

------------------------------------------------------------------------

## Como garantir rastreabilidade no seu fluxo?

-   CÃ³digo limpo e comentado.
-   **Nomeie seus scripts por funÃ§Ã£o:** `01_importar_dados.R`, `02_limpeza.R`, `03_analise.R`.
-   **Salve objetos intermediÃ¡rios:** use `saveRDS()` e `readRDS()` para facilitar reuso.
-   **Evite sobrescrever dados brutos:** nunca edite arquivos originais diretamente.
-   **Padronize nomes e estruturas de pasta.**

ğŸ“¦ Reprodutibilidade exige que *vocÃª (ou outra pessoa)* possa **refazer tudo do zero**.

------------------------------------------------------------------------

## Exemplo real

``` bash
[lulc_model]
â”‚   .gitignore
â”‚   analise_lulc.Rmd
â”‚   README.md
â”‚   simulaÃ§Ã£o_LAM.pdf
â”‚   lulc_model.Rproj
â”œâ”€â”€â”€data
â”‚   â””â”€â”€â”€Limites_IBGE
â”‚           lim_municipio_a.cpg
â”‚           lim_municipio_a.dbf
â”‚           lim_municipio_a.prj
â”‚           lim_municipio_a.shp
â”‚           lim_municipio_a.shx
â”‚           lim_unidade_federacao_a.cpg
â”‚           lim_unidade_federacao_a.dbf
â”‚           lim_unidade_federacao_a.prj
â”‚           lim_unidade_federacao_a.shp
â”‚           lim_unidade_federacao_a.shx
â”œâ”€â”€â”€input
â”‚   â”‚   dens_pop.tif
â”‚   â”‚   dist_major_roads_m.tif
â”‚   â”‚   dist_minor_roads_m.tif
â”‚   â”‚   dist_rios_m.tif
â”‚   â”‚   dist_track_m.tif
â”‚   â”‚   lulc_reclassified_2000.tif
â”‚   â”‚   lulc_reclassified_2001.tif
â”‚   â”‚   lulc_reclassified_2002.tif
â”‚   â”‚   lulc_reclassified_2003.tif
â”‚   â”‚   lulc_reclassified_2004.tif
â”‚   â”‚   lulc_reclassified_2005.tif
â”‚   â”‚   lulc_reclassified_2006.tif
â”‚   â”‚   lulc_reclassified_2007.tif
â”‚   â”‚   lulc_reclassified_2008.tif
â”‚   â”‚   lulc_reclassified_2009.tif
â”‚   â”‚   lulc_reclassified_2010.tif
â”‚   â”‚   lulc_reclassified_2011.tif
â”‚   â”‚   lulc_reclassified_2012.tif
â”‚   â”‚   lulc_reclassified_2013.tif
â”‚   â”‚   lulc_reclassified_2014.tif
â”‚   â”‚   lulc_reclassified_2015.tif
â”‚   â”‚   lulc_reclassified_2016.tif
â”‚   â”‚   lulc_reclassified_2017.tif
â”‚   â”‚   lulc_reclassified_2018.tif
â”‚   â”‚   lulc_reclassified_2019.tif
â”‚   â”‚   lulc_reclassified_2020.tif
â”‚   â”‚   lulc_reclassified_2021.tif
â”‚   â”‚   lulc_reclassified_2022.tif
â”‚   â”‚   lulc_reclassified_2023.tif
â”‚   â”‚   precip_30m.tif
â”‚   â”‚   proporcoes_antropicos.tif
â”‚   â”‚   slope_una.tif
â”‚   â”‚   temp_30m.tif
â”‚   â”‚   tpi_una.tif
â”‚   â”‚
â”‚   â””â”€â”€â”€correlacionadas
â”‚           altitude_una.tif
â”‚           proporcoes_naturais.tif
â”‚           proporcoes_urbano.tif
â”‚           tri_una.tif
â”œâ”€â”€â”€output
â”‚       areas_transicao.csv
â”‚       matriz_transicao.csv
â”‚       modelos_rf.rds
â”‚       prob_1_3.tif
â”‚       prob_2_3.tif
â”‚       prob_3_1.tif
â”‚       prob_3_2.tif
â”‚       prob_3_4.tif
â”‚       projecao_2025.tif
â”‚       projecao_2030.tif
â”‚       projecao_2035.tif
â”‚       projecao_2040.tif
â”‚       projecao_2045.tif
â”‚       projecao_2050.tif
â”‚       uso_base_projecao.tif
â”‚       uso_proj.tif
â”œâ”€â”€â”€plots
â”‚       boxplot_probs.png
â”‚       importancia_variaveis_rf.png
â”‚       mapas_presente.png
â”‚       mapas_futuro.png
â”‚       perdas_ganhos_total.png
â”‚       perdas_ganhos_total_futuro.png
â”‚       perdas_ganhos_periodos.png
â”‚       perdas_ganhos_periodos_futuro.png
â”‚       sankey_lulc.png
â”‚       tendencia_preditoras_1_3.png
â”‚       tendencia_preditoras_2_3.png
â”‚       tendencia_preditoras_3_1.png
â”‚       tendencia_preditoras_3_2.png
â”‚       tendencia_preditoras_3_4.png
â”‚
â”œâ”€â”€â”€functions
â”‚       alocar_transicao.R
â”‚       ampliar_amostras_temporais.R
â”‚       calcular_areas_transicao.R
â”‚       calcular_ganhos_perdas.R
â”‚       carregar_dados.R
â”‚       gerar_amostras.R
â”‚       gerar_mudancas.R
â”‚       matriz_transicao.R
â”‚       prever_probabilidade.R
â”‚       remover_variaveis_correlacionadas.R
â”‚       treinar_rf.R
â”‚       validar_modelo.R
â”‚
â””â”€â”€â”€scripts
â”‚       01_rodar_modelo.R
â”‚       02_projetar_futuro.R
â”‚       03_desempenho_modelo.R
â”‚       04_graficos_barras.R
â”‚       05_graficos_boxplot.R
â”‚       06_graficos_sankey.R
â”‚       07_graficos_importancia_variaveis.R
â”‚       08_tendencia_espacial.R
â”‚       09_mapas.R
```

------------------------------------------------------------------------

## Resumo do Dia 1 â€“ Teoria

-   Reprodutibilidade Ã© um pilar da boa ciÃªncia.
-   R e RStudio oferecem ferramentas robustas para isso.
-   OrganizaÃ§Ã£o e padronizaÃ§Ã£o sÃ£o fundamentais.

------------------------------------------------------------------------

## DiscussÃ£o RÃ¡pida

\

ğŸ‘‰ VocÃª jÃ¡ tentou reproduzir uma anÃ¡lise de outra pessoa?\
\
\
ğŸ‘‰ Seus prÃ³prios scripts antigos: sÃ£o compreensÃ­veis hoje?

------------------------------------------------------------------------

## DÃºvidas?

-   Alguma dÃºvida ou comentÃ¡rio atÃ© aqui?\
    \
-   Em breve: vamos pÃ´r a mÃ£o na massa ğŸš€
